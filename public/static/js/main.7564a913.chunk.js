(this["webpackJsonpbookSwitch-client"]=this["webpackJsonpbookSwitch-client"]||[]).push([[0],{72:function(e,t,a){},73:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(30),o=a.n(r),s=(a(71),a(72),a(73),a(16)),i=a(47),l=a(9),d=a(10),j=a(12),h=a(11),b={API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL||"https://localhost:5005"},u=a(13),m=a(14),O=a(106),x=a(105),p=a(0),g=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)(O.a,{className:"hor-ver-2 justify-content-between body-width",bg:"light",children:[Object(p.jsx)(O.a.Brand,{className:"justify-content-center logo",children:Object(p.jsx)(m.b,{to:"/",children:Object(p.jsxs)("h1",{children:["Book",Object(p.jsx)("span",{children:"Switch"})]})})}),Object(p.jsxs)(x.a,{className:"hor-ver-2 justify-content-end justify-content-around",activeKey:"/",children:[Object(p.jsx)(x.a.Item,{children:Object(p.jsxs)(m.b,{to:"/",children:[Object(p.jsx)("img",{src:"/assets/home.png",alt:"home-icon"}),Object(p.jsx)("br",{}),"Home"]})}),this.props.user&&Object(p.jsx)(x.a.Item,{children:Object(p.jsxs)(m.b,{to:"/messages",children:[Object(p.jsx)("img",{src:"/assets/002-speech-bubble.png",alt:"messages-icon"}),Object(p.jsx)("br",{}),"Messages"]})}),this.props.user&&Object(p.jsx)(x.a.Item,{children:Object(p.jsxs)(m.b,{to:"/profile",children:[Object(p.jsx)("img",{src:"/assets/005-like.png",alt:"profile-icon"}),Object(p.jsx)("br",{}),"Profile"]})}),this.props.user&&Object(p.jsx)(x.a.Item,{children:Object(p.jsxs)(m.b,{onClick:this.props.handleLogout,children:[Object(p.jsx)("img",{src:"/assets/016-shortcut-script-app.png",alt:"logout-icon"}),Object(p.jsx)("br",{}),"Log Out"]})}),!this.props.user&&Object(p.jsx)(x.a.Item,{children:Object(p.jsx)(m.b,{to:"/signup",children:"Signup"})}),!this.props.user&&Object(p.jsx)(x.a.Item,{children:Object(p.jsx)(m.b,{to:"/login",children:"Login"})})]})]})})}}]),a}(n.Component),v=a(8),f=a(7),y=a.n(f),w=a(32),k=a(65);var S=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),s=Object(v.a)(o,2),i=s[0],l=s[1],d=Object(n.useState)(""),j=Object(v.a)(d,2),h=j[0],u=j[1],m=Object(n.useState)(""),O=Object(v.a)(m,2),x=O[0],g=O[1],f=Object(n.useState)(""),S=Object(v.a)(f,2),C=S[0],N=S[1],_=Object(n.useState)(""),I=Object(v.a)(_,2),L=I[0],E=I[1],U=Object(n.useState)(""),P=Object(v.a)(U,2),A=P[0],R=P[1];return Object(n.useEffect)((function(){var e=!0;return y.a.get("".concat(b.API_URL,"/api/location")).then((function(t){e&&r(t.data)})).catch((function(e){console.log(e)})),function(){return e=!1}}),[]),Object(p.jsxs)(w.a,{className:"body-width",onSubmit:e.handleSubmit,children:[Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Username"}),Object(p.jsx)(w.a.Control,{required:!0,name:"username",type:"text",placeholder:"Enter username",onChange:function(e){return u(e.target.value)},value:h})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Name"}),Object(p.jsx)(w.a.Control,{name:"name",type:"text",placeholder:"Enter name",onChange:function(e){return l(e.target.value)},value:i})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Last Name"}),Object(p.jsx)(w.a.Control,{name:"lastName",type:"text",placeholder:"Enter last name",onChange:function(e){return g(e.target.value)},value:x})]}),Object(p.jsxs)(w.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(w.a.Label,{children:"Email address"}),Object(p.jsx)(w.a.Control,{required:!0,name:"email",type:"email",placeholder:"Enter email",onChange:function(e){return E(e.target.value)},value:L}),Object(p.jsx)(w.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(p.jsxs)(w.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(w.a.Label,{children:"Password"}),Object(p.jsx)(w.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",onChange:function(e){return R(e.target.value)},value:A})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"City"}),Object(p.jsx)(w.a.Control,{as:"select",placeholder:"Select your city",name:"location",onChange:function(e){return N(e.target.value)},value:C,children:c.map((function(e,t){return Object(p.jsx)("option",{value:e._id,children:e.city},t)}))})]}),Object(p.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Submit"})]})},C=a(101),N=a(107),_=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.book,t="/book/"+e._id;return Object(p.jsx)(m.b,{to:t,children:Object(p.jsxs)(N.a,{children:[Object(p.jsx)(N.a.Img,{style:{width:"120px",margin:"0 auto"},variant:"top",src:e.photo}),Object(p.jsxs)(N.a.Body,{children:[Object(p.jsx)(N.a.Title,{children:e.title}),Object(p.jsx)(N.a.Title,{children:e.author}),Object(p.jsx)(N.a.Text,{children:e.description})]}),Object(p.jsx)(N.a.Footer,{children:Object(p.jsx)("small",{classNameName:"text-muted",children:e.owner.city})})]})},e._id)}}]),a}(n.Component),I=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.forSearch;return Object(p.jsx)("section",{className:"searchbar body-width",children:Object(p.jsxs)("form",{className:"d-flex",action:"/home",method:"GET",children:[Object(p.jsx)("img",{width:"30px",src:"/assets/006-search.png",alt:"searchicon"}),Object(p.jsx)("input",{name:"searchedToy",className:"search-input form-control me-2",type:"search",placeholder:"Search by Author or Title","aria-label":"Search",onChange:e})]})})}}]),a}(n.Component),L=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={books:[],filtered:[],mode:"all",searchText:""},e.handleSwitchMode=function(t){e.setState({mode:t},e.updateFilter)},e.handleSearch=function(t){var a=t.target.value.toLowerCase();e.setState({searchText:a},e.updateFilter)},e.updateFilter=function(){var t=e.state,a=t.searchText,n=t.mode,c=t.books.filter((function(e){return(e.title.toLowerCase().includes(a)||e.author.toLowerCase().includes(a))&&("all"===n||e.switchMode===n)}));e.setState({filtered:c})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.get("".concat(b.API_URL,"/api/book")).then((function(t){e.setState({books:t.data,filtered:t.data})})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.books,n=t.filtered;return 0===a.length?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{animation:"border",variant:"primary"}),Object(p.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"border",variant:"success"}),Object(p.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"success"})]}):Object(p.jsxs)(c.a.Fragment,{children:[Object(p.jsxs)("section",{className:"categories",children:[Object(p.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("all")},className:"btn btn-primary",children:"All"}),Object(p.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("switch")},className:"btn btn-primary",children:"Switch"}),Object(p.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("gift")},className:"btn btn-primary",children:"Gift"}),Object(p.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("temporary-switch")},className:"btn btn-primary",children:"Temporary Switch"}),Object(p.jsx)(k.a,{className:"btn btn-primary",children:Object(p.jsx)(m.b,{to:"/book/random",children:"Random Book"})})]}),Object(p.jsx)(I,{forSearch:this.handleSearch}),Object(p.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:n.map((function(e){return Object(p.jsx)(_,{book:e})}))})]})}}]),a}(n.Component),E=a(104);function U(e){return Object(p.jsxs)(E.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(p.jsx)(E.a.Header,{closeButton:!0,children:Object(p.jsx)(E.a.Title,{id:"contained-modal-title-vcenter",children:Object(p.jsx)("h2",{children:"Welcome to Book Switch!"})})}),Object(p.jsxs)(E.a.Body,{className:"hor-ver-2",children:[Object(p.jsx)(N.a.Img,{style:{width:"270px"},src:"assets/welcomepage.jpg",alt:"Card image"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Thanks for joining Book Switch! You are now ready to switch books with other people in your community, creating a local book club in which instead of buying the same book many times, will allow a book to be read by many others. Start by editing your profile where you can add books to your library so other people can request a switch."}),Object(p.jsx)("p",{children:"You'll also be able to browse the books available in your city or search by title or author by using the search bar. We also added a cool feature: random book. You can try it!"})]})]}),Object(p.jsxs)(E.a.Footer,{children:[Object(p.jsx)(k.a,{onClick:e.handleFirstEdit,children:"Start by Editing your Profile"}),Object(p.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})]}))}var P=function(e){var t=c.a.useState(!0),a=Object(v.a)(t,2),n=a[0],r=a[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(U,{handleFirstEdit:e.handleFirstEdit,show:n,onHide:function(){return r(!1)}})})},A=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={book:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookId;y.a.get("".concat(b.API_URL,"/api/book/get/").concat(t)).then((function(t){e.setState({book:t.data})})).catch((function(e){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state.book,t=this.props.user;if(!e||!t)return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{animation:"border",variant:"primary"}),Object(p.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"border",variant:"success"}),Object(p.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"success"})]});console.log(t._id,e.owner._id);var a="/messages/"+e.owner._id;return Object(p.jsx)("div",{className:"div-message",children:Object(p.jsx)("div",{className:"messages-div list-group",children:Object(p.jsx)("div",{className:"card mb-3",style:{maxWidth:"800px"},children:Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)("img",{className:"small-image",src:e.photo,alt:"book-cover"})}),Object(p.jsx)("div",{className:"col-md-8",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h4",{className:"card-title",children:e.title}),Object(p.jsxs)("h5",{className:"card-title",children:["by ",e.author," "]}),Object(p.jsx)("p",{className:"card-text",children:e.description}),Object(p.jsxs)("h5",{className:"card-title",children:["to ",e.switchMode]}),t._id!==e.owner._id&&Object(p.jsxs)("p",{children:["Book owner: ",e.owner.username]}),Object(p.jsxs)("div",{children:[t._id===e.owner._id&&Object(p.jsx)("img",{src:"/assets/008-edition.png",alt:"editbook-icon"}),t._id===e.owner._id&&Object(p.jsx)("img",{src:"/assets/032-delete-4.png",alt:"deletebook-icon"}),t._id!==e.owner._id&&Object(p.jsx)(m.b,{to:a,children:Object(p.jsx)(k.a,{children:"Request Switch"})})]})]})})]})})})})}}]),a}(n.Component);var R=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(e.user.name),i=Object(v.a)(o,2),l=i[0],d=i[1],j=Object(n.useState)(e.user.username),h=Object(v.a)(j,2),u=h[0],m=h[1],O=Object(n.useState)(e.user.lastName),x=Object(v.a)(O,2),g=x[0],f=x[1],S=Object(n.useState)(e.user.location),C=Object(v.a)(S,2),N=C[0],_=C[1];return Object(n.useEffect)((function(){var e=!0;return y.a.get("".concat(b.API_URL,"/api/location")).then((function(t){e&&r(t.data)})).catch((function(e){console.log(e)})),function(){return e=!1}}),[]),Object(p.jsxs)(E.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(p.jsx)(E.a.Header,{closeButton:!0,children:Object(p.jsx)(E.a.Title,{id:"contained-modal-title-vcenter",children:"Edit your Profile"})}),Object(p.jsx)(E.a.Body,{children:Object(p.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handleProfileChange(t)},children:[Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Username"}),Object(p.jsx)(w.a.Control,{name:"username",required:!0,type:"text",placeholder:"Enter username",onChange:function(e){return m(e.target.value)},value:u})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Name"}),Object(p.jsx)(w.a.Control,{name:"name",type:"text",placeholder:"Enter your name",onChange:function(e){return d(e.target.value)},value:l})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Last Name"}),Object(p.jsx)(w.a.Control,{name:"lastName",type:"text",placeholder:"Enter your last name",onChange:function(e){return f(e.target.value)},value:g})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"City"}),Object(p.jsx)(w.a.Control,{as:"select",placeholder:"Select your city",name:"location",onChange:function(e){return _(e.target.value)},value:N,children:c.map((function(e,t){return Object(p.jsx)("option",{value:e._id,children:e.city},t)}))})]}),Object(p.jsx)(k.a,{variant:"primary",size:"lg",type:"submit",children:"Save Changes"}),Object(p.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})}),Object(p.jsx)(E.a.Footer,{})]}))},B=a(102),F=a(103),T=a(64);var D=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(e.book.title),i=Object(v.a)(o,2),l=i[0],d=i[1],j=Object(n.useState)(e.book.author),h=Object(v.a)(j,2),u=h[0],m=h[1],O=Object(n.useState)(e.book.description),x=Object(v.a)(O,2),g=x[0],f=x[1],S=Object(n.useState)(e.book.language),C=Object(v.a)(S,2),N=C[0],_=C[1],I=Object(n.useState)(e.book.category),L=Object(v.a)(I,2),U=L[0],P=L[1],A=Object(n.useState)(e.book.switchMode),R=Object(v.a)(A,2),B=R[0],F=R[1],T=Object(n.useState)([]),D=Object(v.a)(T,2),M=D[0],H=D[1];return Object(n.useEffect)((function(){if(l||u){var e=l?"/"+l:"";e=u?e+"/"+u:e,setTimeout((function(){y.a.get("".concat(b.API_URL,"/api/book/search").concat(e),{withCredentials:!0}).then((function(e){H(e.data)})).catch((function(){}))}),500)}}),[l,u]),Object(p.jsxs)(E.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(p.jsx)(E.a.Header,{closeButton:!0}),Object(p.jsx)("div",{className:"google-book-card",children:M&&M.filter((function(e,t){return t<3})).filter((function(e){return e.volumeInfo.imageLinks})).filter((function(e){return e.volumeInfo.authors})).map((function(e){var t=e.volumeInfo.title.length>15?e.volumeInfo.title.slice(0,15)+" ...":e.volumeInfo.title;return Object(p.jsx)("a",{onClick:function(){d(e.volumeInfo.title),m(e.volumeInfo.authors[0]),f(e.volumeInfo.description.slice(0,400)),P(e.volumeInfo.categories[0]),r(e.volumeInfo.imageLinks.thumbnail)},children:Object(p.jsx)("div",{class:"col",children:Object(p.jsxs)("div",{class:"card",children:[Object(p.jsx)("img",{src:e.volumeInfo.imageLinks.smallThumbnail,alt:"book-cover"}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{children:t}),Object(p.jsxs)("h5",{className:"text-muted",children:["by ",e.volumeInfo.authors[0]]})]})]})})})}))}),Object(p.jsx)(E.a.Body,{className:"hor-ver-2",children:Object(p.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handleAddorEditBook(t)},children:[Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Title"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return d(e.target.value)},value:l,name:"title",required:!0,type:"text",placeholder:"Enter title"}),Object(p.jsx)(w.a.Control,{value:c,name:"photo",hidden:!0,type:"text",placeholder:"Enter title"})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Author"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return m(e.target.value)},value:u,name:"author",required:!0,type:"text",placeholder:"Enter author(s)"})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Description"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return f(e.target.value)},value:g,name:"description",type:"text",placeholder:"Enter description"})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Language"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return _(e.target.value)},value:N,name:"language",type:"text",placeholder:"Enter language"})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Category"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return P(e.target.value)},value:U,name:"category",required:!0,type:"text",placeholder:"Enter category"})]}),Object(p.jsxs)(w.a.Group,{children:[Object(p.jsx)(w.a.Label,{children:"Switch Mode"}),Object(p.jsx)(w.a.Control,{onChange:function(e){return F(e.target.value)},value:B,name:"switchMode",required:!0,type:"text",placeholder:"Enter Switch Mode"})]}),Object(p.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Save Book to Library"}),Object(p.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})})]}))},M=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={showTextArea:!1,showEditBookForm:!1},e.onHide=function(){e.setState({showEditBookForm:!1})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.showEditBookForm,n=t.showTextArea,c=this.props,r=c.book,o=c.user,s=c.handleDelete,i=c.handleEditBook;return Object(p.jsxs)(B.a,{children:[a&&Object(p.jsx)(D,{show:a,onHide:this.onHide,book:r,handleAddorEditBook:i}),Object(p.jsx)(N.a,{className:"text-center",children:Object(p.jsxs)(F.a,{className:"book-details",children:[Object(p.jsx)(T.a,{children:Object(p.jsx)(N.a.Img,{variant:"top",src:r.photo,alt:"book-cover"})}),Object(p.jsxs)(T.a,{children:[Object(p.jsxs)(N.a.Body,{children:[Object(p.jsx)(N.a.Title,{children:r.title}),Object(p.jsxs)(N.a.Title,{className:"text-muted",children:["by ",r.author]}),Object(p.jsx)(N.a.Text,{children:r.description}),Object(p.jsxs)(N.a.Text,{children:["Language: ",r.language]}),Object(p.jsxs)(N.a.Text,{children:["Category: ",r.category]})]}),Object(p.jsxs)(N.a.Footer,{children:[Object(p.jsx)("div",{children:Object(p.jsxs)("small",{className:"text-muted",children:["Switch Mode: ",r.switchMode]})}),Object(p.jsx)("div",{children:Object(p.jsxs)("small",{className:"text-muted",children:["City: ",r.owner.location.city]})})]}),n&&Object(p.jsxs)("form",{id:"userform",class:"center",method:"POST",action:"/sendmessage/{{data.toy._id}}",children:[Object(p.jsx)("textarea",{name:"text",form:"userform",cols:"60",rows:"4",placeholder:"Enter your message here..."}),Object(p.jsx)("button",{type:"submit",class:"btn btn-primary btn-del",children:"Send"})]}),Object(p.jsxs)("div",{children:[o._id===r.owner._id&&Object(p.jsx)("img",{onClick:function(){return e.setState({showEditBookForm:!0})},style:{cursor:"pointer"},src:"/assets/008-edition.png",alt:"editbook-icon"}),o._id===r.owner._id&&Object(p.jsx)("img",{onClick:s,src:"/assets/032-delete-4.png",style:{cursor:"pointer"},alt:"deletebook-icon"}),o._id!==r.owner._id&&Object(p.jsx)(k.a,{onClick:function(){return e.setState({showTextArea:!0})},children:"Request Switch"})]})]})]})})]})}}]),a}(n.Component);function H(e){return Object(p.jsxs)(E.a,Object(s.a)(Object(s.a)({},e),{},{size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(p.jsx)(E.a.Header,{closeButton:!0,children:Object(p.jsx)(E.a.Title,{children:"Choose a photo to upload"})}),Object(p.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handlePhoto(t)},enctype:"multipart/form-data",children:[Object(p.jsx)("input",{type:"file",name:"photo",accept:"image/png, image/jpg"}),Object(p.jsx)(k.a,{type:"submit",children:"Upload Photo"})]})]}))}var G=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={addFormShow:!1,profileFormShow:!1,showUploadPhotoForm:!1},e.onHide=function(){e.setState({addFormShow:!1})},e.handleProfileChange=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,location:t.target.location.value,_id:e.props.user._id};y.a.post("".concat(b.API_URL,"/api/auth/user"),a,{withCredentials:!0}).then((function(t){e.props.history.push("/profile")})).catch((function(e){console.log("Something went wrong",e)}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.addFormShow,n=t.profileFormShow,c=t.showUploadPhotoForm,r=this.props,o=r.userLibrary,s=r.user,i=r.handleDelete,l=r.handleEditBook,d=r.handleProfileChange,j=r.handleAddBook,h=r.handlePhoto;return s?Object(p.jsxs)("div",{className:"body-width",children:[a&&Object(p.jsx)(D,{show:a,onHide:this.onHide,book:{},handleAddorEditBook:j}),c&&Object(p.jsx)(H,{show:c,onHide:function(){return e.setState({showUploadPhotoForm:!1})},handlePhoto:h}),Object(p.jsxs)("h2",{children:["Hello ",s.name,"! ",Object(p.jsx)("br",{}),"Welcome to your profile"]}),Object(p.jsxs)(N.a,{className:"text-center",style:{width:"18rem",margin:"1em auto"},children:[Object(p.jsx)(N.a.Img,{variant:"top",src:s.photo,roundedCircle:!0}),Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:"/assets/003-camera.png",style:{cursor:"pointer"},onClick:function(){return e.setState({showUploadPhotoForm:!0})},alt:"uploadphoto-icon"}),Object(p.jsx)("img",{style:{cursor:"pointer"},src:"/assets/008-edition.png",alt:"editprofile-icon",onClick:function(){return e.setState({profileFormShow:!0})}})]}),Object(p.jsxs)(N.a.Body,{children:[Object(p.jsx)(N.a.Title,{children:"Your details"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Username:"}),Object(p.jsx)("td",{children:s.username})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Name:"}),Object(p.jsx)("td",{children:s.name})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Last name:"}),Object(p.jsx)("td",{children:s.lastName})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"City:"}),Object(p.jsx)("td",{children:s.location.city})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Email:"}),Object(p.jsx)("td",{children:s.email})]})]})})]}),Object(p.jsx)(N.a.Footer,{}),n&&Object(p.jsx)(R,{show:n,user:s,handleProfileChange:d,onHide:function(){return e.setState({profileFormShow:!1})}})]}),Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"/assets/library.png",alt:"libraryicon"})}),!o.length&&Object(p.jsx)("h1",{children:"You have no books yet in your Library"}),Object(p.jsx)("img",{style:{cursor:"pointer"},src:"/assets/026-library-2.png",alt:"addbook-icon",onClick:function(){return e.setState({addFormShow:!0})}}),o.map((function(e){return Object(p.jsx)(M,{handleDelete:function(t){i(e._id,t)},handleEditBook:function(t){l(e._id,t)},user:s,book:e},e._id)}))]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"border",variant:"light"}),Object(p.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"light"})]})}}]),a}(n.Component),q=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"container-fluid pb-0 mb-0 justify-content-center",children:Object(p.jsxs)("footer",{children:[Object(p.jsx)("div",{className:"row justify-content-center py-5",children:Object(p.jsxs)("div",{className:"col-xl-8 col-sm-4 mb-2 my-auto mx-auto a",children:[Object(p.jsx)("h3",{className:"mb-md-0 mb-5 bold-text",children:"BookSwitch"}),Object(p.jsxs)("small",{className:"rights",children:[Object(p.jsx)("span",{children:"\xae"})," All Rights Reserved."]}),Object(p.jsx)("br",{}),Object(p.jsx)("h6",{className:"mb-2 bold-text py-2",children:Object(p.jsx)("b",{children:"Contact Us"})}),Object(p.jsx)("p",{className:"mb-1",children:"contact@bookswitch.com"})]})}),Object(p.jsxs)("div",{className:"row justify-content-center",children:[Object(p.jsxs)("p",{children:[Object(p.jsx)("img",{className:"my-3 ",width:"90px",src:"/assets/800px-MERN-logo.png",alt:"mernlogo"}),Object(p.jsx)("span",{className:"bold-text py-1",children:"IRONHACKERS"})]}),Object(p.jsxs)("div",{className:"col-md-4 py-1 ",children:[Object(p.jsx)("h6",{className:"mb-2 bold-text",children:Object(p.jsx)("b",{children:"Georgina Morales"})}),Object(p.jsx)("small",{children:" georgina@bookswitch.com"})]}),Object(p.jsxs)("div",{className:"col-md-4 py-1 ",children:[Object(p.jsx)("h6",{className:"mb-2 bold-text",children:Object(p.jsx)("b",{children:"Erdem Taskin"})}),Object(p.jsx)("small",{children:"erdem@bookswitch.com"})]})]})]})})})}}]),a}(n.Component);var W=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),s=Object(v.a)(o,2),i=s[0],l=s[1];return Object(p.jsx)("div",{children:Object(p.jsxs)(w.a,{className:"body-width",onSubmit:e.handleSubmit,children:[Object(p.jsxs)(w.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(w.a.Label,{children:"Email address"}),Object(p.jsx)(w.a.Control,{required:!0,name:"email",type:"email",placeholder:"Enter email",onChange:function(e){return r(e.target.value)},value:c})]}),Object(p.jsxs)(w.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(w.a.Label,{children:"Password"}),Object(p.jsx)(w.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",onChange:function(e){return l(e.target.value)},value:i})]}),Object(p.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Submit"})]})})},z=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={messages:null,loggedInUser:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||y.a.get("".concat(b.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){})),y.a.get("".concat(b.API_URL,"/api/message"),{withCredentials:!0}).then((function(t){e.setState({messages:t.data})})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.loggedInUser;if(!t||!a)return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{animation:"border",variant:"primary"}),Object(p.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"border",variant:"success"}),Object(p.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(p.jsx)(C.a,{animation:"grow",variant:"success"})]});var n=[],c=[];return t.filter((function(e){return e.bookRelated})).forEach((function(e){var t=e.between[0]._id===a._id?e.between[1]:e.between[0];if(!n.includes(t._id)){var r={contact:t,bookRelated:e.bookRelated,date:e.date.toString().substring(4,9)+e.date.toString().substring(14,21),text:e.text};n.push(t._id),c.push(r)}})),Object(p.jsxs)("div",{children:[c.length?Object(p.jsx)("h1",{children:"Your Messages"}):Object(p.jsx)("h1",{children:"You have no Messages yet"}),Object(p.jsx)("div",{className:"list-group",children:c.map((function(e){var t="/messages/"+e.contact._id;return Object(p.jsx)(m.b,{to:t,class:"list-group-item-action",children:Object(p.jsx)("div",{className:"card mb-3 body-width",children:Object(p.jsxs)("div",{className:"row g-0 hor-ver-2",children:[Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)("img",{className:"small-image",src:e.bookRelated.photo,alt:"bookImage"})}),Object(p.jsx)("div",{className:"col-md-8",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsxs)("h5",{className:"card-title",children:["Messages with ",Object(p.jsx)("span",{children:e.contact.username})]}),Object(p.jsxs)("h5",{className:"card-title",children:["Book to Switch ",Object(p.jsx)("span",{children:e.bookRelated.title})]}),Object(p.jsxs)("h5",{className:"card-title",children:["Book to Switch ",Object(p.jsx)("span",{children:e.bookRelated.author})]}),Object(p.jsx)("p",{className:"card-text",children:e.text}),Object(p.jsx)("p",{className:"text-muted",children:e.date})]})})]})})},e.contact._id)}))})]})}}]),a}(n.Component),K=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={messages:[],book:"",contact:"",loggedInUser:"",input:""},e.handleSubmit=function(t){t.preventDefault();var a=t.target.text.value;t.target.reset();var n={text:a,between:[e.state.loggedInUser._id,e.state.contact._id],bookRelated:e.state.book};y.a.post("".concat(b.API_URL,"/api/message"),n,{withCredentials:!0}).then((function(t){e.setState({messages:[].concat(Object(i.a)(e.state.messages),[t.data])},(function(){e.props.history.push("/messages/".concat(e.state.contact._id))}))})).catch((function(e){console.log(e)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||y.a.get("".concat(b.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){}));var t=this.props.match.params.contactId;y.a.get("".concat(b.API_URL,"/api/message/").concat(t),{withCredentials:!0}).then((function(a){var n=a.data[0].between[0]._id===t?a.data[0].between[0]:a.data[0].between[1];e.setState({messages:a.data,book:a.data[0].bookRelated,contact:n},(function(){return console.log(e.state.book,e.state.contact)}))})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.book,n=e.contact,c=(e.input,"/book/"+a._id);return Object(p.jsxs)("div",{className:"div-message",children:[Object(p.jsx)(m.b,{className:"book-link",to:c,children:Object(p.jsx)("div",{className:"messages-div list-group",children:Object(p.jsx)("div",{className:"card mb-3",style:{maxWidth:"800px"},children:Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)("img",{className:"small-image",src:this.state.book.photo,alt:"book-cover"})}),Object(p.jsx)("div",{className:"col-md-8",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h4",{className:"card-title",children:this.state.book.title}),Object(p.jsxs)("h5",{className:"card-title",children:["by ",this.state.book.author," "]}),Object(p.jsxs)("h5",{className:"card-title",children:["to ",this.state.book.switchMode]}),Object(p.jsx)("p",{className:"card-text",children:this.state.book.description})]})})]})})})}),Object(p.jsxs)("h2",{children:["Messages with ",n.username]}),t.map((function(e){var t=e.date,a=e.between[1]._id===n._id?"div-right":"div-left";return Object(p.jsxs)("div",{className:a,children:[e.text,Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"small text-muted",children:t})]})})),Object(p.jsxs)("form",{className:"message-form",onSubmit:this.handleSubmit,children:[Object(p.jsx)("input",{name:"text",required:"true",type:"text",className:"form-control"}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-del",children:"Send"})]})]})}}]),a}(n.Component),Y=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loggedInUser:"",isNewUser:!0,userLibrary:[]},e.handlePhoto=function(e){e.preventDefault();var t=e.target.photo.files[0],a=new FormData;a.append("imageUrl",t),y.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/api/cloudinary/upload",a).then((function(e){console.log(e.data)})).catch((function(){}))},e.handleSignUp=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,email:t.target.email.value,password:t.target.password.value,location:t.target.location.value};y.a.post("".concat(b.API_URL,"/api/auth/signup"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data,isNewUser:!0},(function(){e.props.history.push("/")}))})).catch((function(e){console.log(e)}))},e.handleLogIn=function(t){t.preventDefault();var a={email:t.target.email.value,password:t.target.password.value};y.a.post("".concat(b.API_URL,"/api/auth/login"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Something went wrong",e)}))},e.handleLogout=function(){y.a.post("".concat(b.API_URL,"/api/auth/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))}))},e.handleFirstEdit=function(e){},e.handleEditBook=function(t,a){a.preventDefault();var n=a.target.title.value,c=a.target.author.value,r=a.target.description.value,o=(a.target.photo.value,{title:n,author:c,description:r,language:a.target.language.value,category:a.target.category.value,switchMode:a.target.switchMode.value});y.a.post("".concat(b.API_URL,"/api/book/edit/").concat(t),o,{withCredentials:!0}).then((function(a){var n=a.data,c=e.state.userLibrary.map((function(e){return e._id===n._id?(n.owner=e.owner,n):e}));e.setState({userLibrary:c},(function(){e.props.history.push("/book/".concat(t))}))})).catch((function(e){console.log("Something went wrong",e)}))},e.handleAddBook=function(t){t.preventDefault();var a=t.target.photo.value,n={title:t.target.title.value,author:t.target.author.value,description:t.target.description.value,language:t.target.language.value,category:t.target.category.value,photo:a,switchMode:t.target.switchMode.value};y.a.post("".concat(b.API_URL,"/api/book/add"),n,{withCredentials:!0}).then((function(t){var a=t.data;e.setState({userLibrary:[a].concat(Object(i.a)(e.state.userLibrary))})})).catch((function(e){console.log("Something went wrong",e)}))},e.handleDelete=function(t){y.a.delete("".concat(b.API_URL,"/api/book/delete/").concat(t),{withCredentials:!0}).then((function(){var a=e.state.userLibrary.filter((function(e){return console.log(t,"from map",e._id),e._id!==t}));e.setState({userLibrary:a},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Delete failed",e)}))},e.handleProfileChange=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,location:t.target.location.value,_id:e.state.loggedInUser._id};y.a.post("".concat(b.API_URL,"/api/auth/user"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Something went wrong",e)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.get("".concat(b.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){y.a.get("".concat(b.API_URL,"/api/book/user/").concat(e.state.loggedInUser._id)).then((function(t){e.setState({userLibrary:t.data})}))}))})).catch((function(){}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(g,{handleLogout:this.handleLogout,handleLogIn:this.handleLogIn,handleSignUp:this.handleSignUp,user:this.state.loggedInUser}),this.state.isNewUser&&Object(p.jsx)(P,{handleFirstEdit:this.handleFirstEdit}),Object(p.jsxs)(u.c,{children:[Object(p.jsx)(u.a,{exact:!0,path:"/",render:function(e){return Object(p.jsx)(L,Object(s.a)({},e))}}),Object(p.jsx)(u.a,{exact:!0,path:"/messages",render:function(e){return Object(p.jsx)(z,Object(s.a)({},e))}}),Object(p.jsx)(u.a,{path:"/signup",render:function(t){return Object(p.jsx)(S,Object(s.a)({handleSubmit:e.handleSignUp},t))}}),Object(p.jsx)(u.a,{path:"/login",render:function(t){return Object(p.jsx)(W,Object(s.a)({handleSubmit:e.handleLogIn},t))}}),Object(p.jsx)(u.a,{path:"/book/:bookId",render:function(t){return Object(p.jsx)(A,Object(s.a)({user:e.state.loggedInUser,handleAddBook:e.handleAddBook,handleDelete:e.handleDelete,handleEditBook:e.handleEditBook},t))}}),Object(p.jsx)(u.a,{path:"/messages/:contactId",render:function(e){return Object(p.jsx)(K,Object(s.a)({},e))}}),Object(p.jsx)(u.a,{path:"/profile",render:function(t){return Object(p.jsx)(G,Object(s.a)({userLibrary:e.state.userLibrary,user:e.state.loggedInUser,handleAddBook:e.handleAddBook,handleDelete:e.handleDelete,handleEditBook:e.handleEditBook,handleProfileChange:e.handleProfileChange,handlePhoto:e.handlePhoto},t))}})]}),Object(p.jsx)(q,{})]})}}]),a}(n.Component),V=Object(u.f)(Y);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(m.a,{children:Object(p.jsx)(V,{})})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.7564a913.chunk.js.map