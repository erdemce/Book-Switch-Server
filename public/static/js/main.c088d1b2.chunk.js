(this["webpackJsonpbookSwitch-client"]=this["webpackJsonpbookSwitch-client"]||[]).push([[0],{72:function(e,t,a){},73:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(30),o=a.n(r),s=(a(71),a(72),a(73),a(16)),i=a(47),l=a(9),d=a(10),j=a(12),h=a(11),u={API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL},b=a(14),O=a(13),m=a(106),p=a(105),x=a(0),g=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)(m.a,{className:"hor-ver-2 justify-content-between body-width",bg:"light",children:[Object(x.jsx)(m.a.Brand,{className:"justify-content-center logo",children:Object(x.jsx)(O.b,{to:"/",children:Object(x.jsxs)("h1",{children:["Book",Object(x.jsx)("span",{children:"Switch"})]})})}),Object(x.jsxs)(p.a,{className:"hor-ver-2 justify-content-end justify-content-around",activeKey:"/",children:[Object(x.jsx)(p.a.Item,{children:Object(x.jsxs)(O.b,{to:"/",children:[Object(x.jsx)("img",{src:"/assets/home.png",alt:"home-icon"}),Object(x.jsx)("br",{}),"Home"]})}),this.props.user&&Object(x.jsx)(p.a.Item,{children:Object(x.jsxs)(O.b,{to:"/messages",children:[Object(x.jsx)("img",{src:"/assets/002-speech-bubble.png",alt:"messages-icon"}),Object(x.jsx)("br",{}),"Messages"]})}),this.props.user&&Object(x.jsx)(p.a.Item,{children:Object(x.jsxs)(O.b,{to:"/profile",children:[Object(x.jsx)("img",{src:"/assets/005-like.png",alt:"profile-icon"}),Object(x.jsx)("br",{}),"Profile"]})}),this.props.user&&Object(x.jsx)(p.a.Item,{children:Object(x.jsxs)(O.b,{onClick:this.props.handleLogout,children:[Object(x.jsx)("img",{src:"/assets/016-shortcut-script-app.png",alt:"logout-icon"}),Object(x.jsx)("br",{}),"Log Out"]})}),!this.props.user&&Object(x.jsx)(p.a.Item,{children:Object(x.jsx)(O.b,{to:"/signup",children:"Signup"})}),!this.props.user&&Object(x.jsx)(p.a.Item,{children:Object(x.jsx)(O.b,{to:"/login",children:"Login"})})]})]})})}}]),a}(n.Component),f=a(8),v=a(7),y=a.n(v),w=a(32),k=a(65);var S=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),i=s[0],l=s[1],d=Object(n.useState)(""),j=Object(f.a)(d,2),h=j[0],b=j[1],O=Object(n.useState)(""),m=Object(f.a)(O,2),p=m[0],g=m[1],v=Object(n.useState)(""),S=Object(f.a)(v,2),C=S[0],N=S[1],I=Object(n.useState)(""),L=Object(f.a)(I,2),_=L[0],U=L[1],E=Object(n.useState)(""),P=Object(f.a)(E,2),A=P[0],R=P[1];return Object(n.useEffect)((function(){var e=!0;return y.a.get("".concat(u.API_URL,"/api/location")).then((function(t){e&&r(t.data)})).catch((function(e){console.log(e)})),function(){return e=!1}}),[]),Object(x.jsxs)(w.a,{className:"body-width",onSubmit:e.handleSubmit,children:[Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Username"}),Object(x.jsx)(w.a.Control,{required:!0,name:"username",type:"text",placeholder:"Enter username",onChange:function(e){return b(e.target.value)},value:h})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Name"}),Object(x.jsx)(w.a.Control,{name:"name",type:"text",placeholder:"Enter name",onChange:function(e){return l(e.target.value)},value:i})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Last Name"}),Object(x.jsx)(w.a.Control,{name:"lastName",type:"text",placeholder:"Enter last name",onChange:function(e){return g(e.target.value)},value:p})]}),Object(x.jsxs)(w.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(w.a.Label,{children:"Email address"}),Object(x.jsx)(w.a.Control,{required:!0,name:"email",type:"email",placeholder:"Enter email",onChange:function(e){return U(e.target.value)},value:_}),Object(x.jsx)(w.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(x.jsxs)(w.a.Group,{controlId:"formBasicPassword",children:[Object(x.jsx)(w.a.Label,{children:"Password"}),Object(x.jsx)(w.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",onChange:function(e){return R(e.target.value)},value:A})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"City"}),Object(x.jsx)(w.a.Control,{as:"select",placeholder:"Select your city",name:"location",onChange:function(e){return N(e.target.value)},value:C,children:c.map((function(e,t){return Object(x.jsx)("option",{value:e._id,children:e.city},t)}))})]}),Object(x.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Submit"})]})},C=a(101),N=a(107),I=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this.props.book,a="/book/"+t._id;return Object(x.jsx)(O.b,{to:a,children:Object(x.jsxs)(N.a,{children:[Object(x.jsx)(N.a.Img,{style:{width:"120px",margin:"0 auto"},variant:"top",src:t.photo}),Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:t.title}),Object(x.jsx)(N.a.Title,{children:t.author}),Object(x.jsx)(N.a.Text,{children:t.language}),Object(x.jsx)(N.a.Text,{children:t.switchMode})]}),Object(x.jsx)(N.a.Footer,{children:Object(x.jsx)("small",{classNameName:"text-muted",children:null===(e=t.owner.location)||void 0===e?void 0:e.city})})]})},t._id)}}]),a}(n.Component),L=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.forSearch;return Object(x.jsx)("section",{className:"searchbar body-width",children:Object(x.jsxs)("form",{className:"d-flex",action:"/home",method:"GET",children:[Object(x.jsx)("img",{width:"30px",src:"/assets/006-search.png",alt:"searchicon"}),Object(x.jsx)("input",{name:"searchedToy",className:"search-input form-control me-2",type:"search",placeholder:"Search by Author or Title","aria-label":"Search",onChange:e})]})})}}]),a}(n.Component),_=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={books:[],filtered:[],mode:"all",searchText:""},e.handleSwitchMode=function(t){e.setState({mode:t},e.updateFilter)},e.handleSearch=function(t){var a=t.target.value.toLowerCase();e.setState({searchText:a},e.updateFilter)},e.updateFilter=function(){var t=e.state,a=t.searchText,n=t.mode,c=t.books.filter((function(e){return(e.title.toLowerCase().includes(a)||e.author.toLowerCase().includes(a))&&("all"===n||e.switchMode===n)}));e.setState({filtered:c})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.get("".concat(u.API_URL,"/api/book")).then((function(t){e.setState({books:t.data,filtered:t.data})})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.books,n=t.filtered;return 0===a.length?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C.a,{animation:"border",variant:"primary"}),Object(x.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"border",variant:"success"})]}):Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsxs)("section",{className:"categories",children:[Object(x.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("all")},className:"btn btn-primary",children:"All"}),Object(x.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("switch")},className:"btn btn-primary",children:"Switch"}),Object(x.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("gift")},className:"btn btn-primary",children:"Gift"}),Object(x.jsx)(k.a,{onClick:function(){return e.handleSwitchMode("temporary-switch")},className:"btn btn-primary",children:"Temporary Switch"}),Object(x.jsx)(k.a,{className:"btn btn-primary",children:Object(x.jsx)(O.b,{to:"/book/random",children:"Random Book"})})]}),Object(x.jsx)(L,{forSearch:this.handleSearch}),Object(x.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:n.map((function(e){return Object(x.jsx)(I,{book:e})}))})]})}}]),a}(n.Component),U=a(104);function E(e){return Object(x.jsxs)(U.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(U.a.Header,{closeButton:!0,children:Object(x.jsx)(U.a.Title,{id:"contained-modal-title-vcenter",children:Object(x.jsx)("h2",{children:"Welcome to Book Switch!"})})}),Object(x.jsxs)(U.a.Body,{className:"hor-ver-2",children:[Object(x.jsx)(N.a.Img,{style:{width:"270px"},src:"assets/welcomepage.jpg",alt:"Card image"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{className:"cl-1",children:"Book"}),Object(x.jsx)("span",{className:"cl-2",children:"Switch"})," is an app where you can switch books with other people in your city."]}),Object(x.jsx)("p",{children:"Sign up and start switching!"})]})]}),Object(x.jsxs)(U.a.Footer,{children:[Object(x.jsx)(O.b,{to:"/signup",children:Object(x.jsx)(k.a,{onClick:e.onHide,children:"Sign Up"})}),Object(x.jsx)(O.b,{to:"/login",children:Object(x.jsx)(k.a,{onClick:e.onHide,children:"Log In"})}),Object(x.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})]}))}var P=function(e){var t=c.a.useState(!0),a=Object(f.a)(t,2),n=a[0],r=a[1];return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(E,{handleFirstEdit:e.handleFirstEdit,show:n,onHide:function(){return r(!1)}})})},A=a(102),R=a(103),B=a(64);var T=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(e.book.title),i=Object(f.a)(o,2),l=i[0],d=i[1],j=Object(n.useState)(e.book.author),h=Object(f.a)(j,2),b=h[0],O=h[1],m=Object(n.useState)(e.book.description),p=Object(f.a)(m,2),g=p[0],v=p[1],S=Object(n.useState)(e.book.language),C=Object(f.a)(S,2),N=C[0],I=C[1],L=Object(n.useState)(e.book.category),_=Object(f.a)(L,2),E=_[0],P=_[1],A=Object(n.useState)(e.book.switchMode),R=Object(f.a)(A,2),B=(R[0],R[1]),T=Object(n.useState)([]),F=Object(f.a)(T,2),D=F[0],M=F[1];return Object(n.useEffect)((function(){if(l||b){var e=l?"/"+l:"";e=b?e+"/"+b:e,setTimeout((function(){y.a.get("".concat(u.API_URL,"/api/book/search").concat(e),{withCredentials:!0}).then((function(e){M(e.data)})).catch((function(){}))}),500)}}),[l,b]),Object(x.jsxs)(U.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(U.a.Header,{closeButton:!0}),Object(x.jsx)("div",{className:"google-book-card",children:D&&D.filter((function(e,t){return t<3})).filter((function(e){return e.volumeInfo.imageLinks})).filter((function(e){return e.volumeInfo.authors})).map((function(e){var t=e.volumeInfo.title.length>15?e.volumeInfo.title.slice(0,15)+"...":e.volumeInfo.title;return Object(x.jsx)("a",{onClick:function(){d(e.volumeInfo.title),O(e.volumeInfo.authors[0]),v(e.volumeInfo.description.slice(0,400)),P(e.volumeInfo.categories[0]),r(e.volumeInfo.imageLinks.thumbnail)},children:Object(x.jsx)("div",{class:"col",children:Object(x.jsxs)("div",{class:"card",children:[Object(x.jsx)("img",{src:e.volumeInfo.imageLinks.smallThumbnail,alt:"book-cover"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{children:t}),Object(x.jsxs)("h5",{className:"text-muted",children:["by ",e.volumeInfo.authors[0]]})]})]})})})}))}),Object(x.jsx)(U.a.Body,{className:"hor-ver-2",children:Object(x.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handleAddorEditBook(t)},children:[Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Title"}),Object(x.jsx)(w.a.Control,{onChange:function(e){return d(e.target.value)},value:l,name:"title",required:!0,type:"text",placeholder:"Enter title"}),Object(x.jsx)(w.a.Control,{value:c,name:"photo",hidden:!0,type:"text",placeholder:"Enter title"})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Author"}),Object(x.jsx)(w.a.Control,{onChange:function(e){return O(e.target.value)},value:b,name:"author",required:!0,type:"text",placeholder:"Enter author(s)"})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Description"}),Object(x.jsx)(w.a.Control,{onChange:function(e){return v(e.target.value)},value:g,name:"description",type:"text",placeholder:"Enter description"})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Language"}),Object(x.jsx)(w.a.Control,{onChange:function(e){return I(e.target.value)},value:N,name:"language",type:"text",placeholder:"Enter language"})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Category"}),Object(x.jsx)(w.a.Control,{onChange:function(e){return P(e.target.value)},value:E,name:"category",required:!0,type:"text",placeholder:"Enter category"})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Switch Mode"}),Object(x.jsxs)(w.a.Control,{as:"select",placeholder:"Select your Switch Mode",onChange:function(e){return B(e.target.value)},name:"switchMode",required:!0,type:"text",children:[Object(x.jsx)("option",{value:"switch",children:"Switch"}),Object(x.jsx)("option",{value:"gift",children:"Gift"}),Object(x.jsx)("option",{value:"temporary-switch",children:"Temporary Switch"})]})]}),Object(x.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Save Book to Library"}),Object(x.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})})]}))},F=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={showTextArea:!1,showEditBookForm:!1},e.onHide=function(){e.setState({showEditBookForm:!1,showTextArea:!1})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.showEditBookForm,n=t.showTextArea,c=this.props,r=c.book,o=c.user,s=c.handleDelete,i=c.handleEditBook,l=c.handleSendRequest;return Object(x.jsxs)(A.a,{className:"body-width",children:[a&&Object(x.jsx)(T,{show:a,onHide:this.onHide,book:r,handleAddorEditBook:i}),Object(x.jsx)(N.a,{className:"text-center",children:Object(x.jsxs)(R.a,{className:"book-details",children:[Object(x.jsx)(B.a,{children:Object(x.jsx)(N.a.Img,{variant:"top",src:r.photo,alt:"book-cover"})}),Object(x.jsxs)(B.a,{children:[Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:r.title}),Object(x.jsxs)(N.a.Title,{className:"text-muted",children:["by ",r.author]}),Object(x.jsx)(N.a.Text,{children:r.description}),Object(x.jsxs)(N.a.Text,{children:["Language: ",r.language]}),Object(x.jsxs)(N.a.Text,{children:["Category: ",r.category]}),Object(x.jsxs)(N.a.Text,{children:["Switch Mode: ",r.switchMode]}),Object(x.jsxs)(N.a.Text,{children:["City: ",r.owner.location.city]})]}),Object(x.jsx)(N.a.Footer,{}),n&&Object(x.jsxs)("form",{id:"userform",class:"center",onSubmit:function(t){e.onHide(),l(t)},children:[Object(x.jsx)("textarea",{name:"text",form:"userform",cols:"60",rows:"4",placeholder:"Enter your message here..."}),Object(x.jsx)("button",{type:"submit",class:"btn btn-primary btn-del",children:"Send"})]}),Object(x.jsxs)("div",{children:[console.log("user:",o,"book:",r),o._id===r.owner._id&&Object(x.jsx)("img",{onClick:function(){return e.setState({showEditBookForm:!0})},style:{cursor:"pointer"},src:"/assets/008-edition.png",alt:"editbook-icon"}),o._id===r.owner._id&&Object(x.jsx)("img",{onClick:s,src:"/assets/032-delete-4.png",style:{cursor:"pointer"},alt:"deletebook-icon"}),o._id!==r.owner._id&&Object(x.jsx)(k.a,{onClick:function(){return e.setState({showTextArea:!0})},children:"Request Switch"})]})]})]})})]})}}]),a}(n.Component),D=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={book:null},e.handleSendRequest=function(t){t.preventDefault();var a=t.target.text.value,n=e.state.book,c={text:a,bookRelated:n._id,between:[e.props.user._id,n.owner._id]};y.a.post("".concat(u.API_URL,"/api/message"),c,{withCredentials:!0}).then((function(e){})).catch((function(e){console.log("Fetching failed")}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookId;y.a.get("".concat(u.API_URL,"/api/book/get/").concat(t)).then((function(t){e.setState({book:t.data})})).catch((function(e){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state.book,t=this.props,a=t.user,n=t.handleDelete,c=t.handleEditBook;if(!e||!a)return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C.a,{animation:"border",variant:"primary"}),Object(x.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"border",variant:"success"})]});e.owner._id;return Object(x.jsx)(F,{book:e,user:a,handleDelete:n,handleEditBook:c,handleSendRequest:this.handleSendRequest})}}]),a}(n.Component);var M=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(e.user.name),i=Object(f.a)(o,2),l=i[0],d=i[1],j=Object(n.useState)(e.user.username),h=Object(f.a)(j,2),b=h[0],O=h[1],m=Object(n.useState)(e.user.lastName),p=Object(f.a)(m,2),g=p[0],v=p[1],S=Object(n.useState)(e.user.location),C=Object(f.a)(S,2),N=C[0],I=C[1];return Object(n.useEffect)((function(){var e=!0;return y.a.get("".concat(u.API_URL,"/api/location")).then((function(t){e&&r(t.data)})).catch((function(e){console.log(e)})),function(){return e=!1}}),[]),Object(x.jsxs)(U.a,Object(s.a)(Object(s.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(U.a.Header,{closeButton:!0,children:Object(x.jsx)(U.a.Title,{id:"contained-modal-title-vcenter",children:"Edit your Profile"})}),Object(x.jsx)(U.a.Body,{children:Object(x.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handleProfileChange(t)},children:[Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Username"}),Object(x.jsx)(w.a.Control,{name:"username",required:!0,type:"text",placeholder:"Enter username",onChange:function(e){return O(e.target.value)},value:b})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Name"}),Object(x.jsx)(w.a.Control,{name:"name",type:"text",placeholder:"Enter your name",onChange:function(e){return d(e.target.value)},value:l})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"Last Name"}),Object(x.jsx)(w.a.Control,{name:"lastName",type:"text",placeholder:"Enter your last name",onChange:function(e){return v(e.target.value)},value:g})]}),Object(x.jsxs)(w.a.Group,{children:[Object(x.jsx)(w.a.Label,{children:"City"}),Object(x.jsx)(w.a.Control,{as:"select",placeholder:"Select your city",name:"location",onChange:function(e){return I(e.target.value)},value:N,children:c.map((function(e,t){return Object(x.jsx)("option",{value:e._id,children:e.city},t)}))})]}),Object(x.jsx)(k.a,{variant:"primary",size:"lg",type:"submit",children:"Save Changes"}),Object(x.jsx)(k.a,{onClick:e.onHide,children:"Close"})]})}),Object(x.jsx)(U.a.Footer,{})]}))};function H(e){return Object(x.jsxs)(U.a,Object(s.a)(Object(s.a)({},e),{},{size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(U.a.Header,{closeButton:!0,children:Object(x.jsx)(U.a.Title,{children:"Choose a photo to upload"})}),Object(x.jsxs)(w.a,{onSubmit:function(t){e.onHide(),e.handlePhoto(t)},enctype:"multipart/form-data",children:[Object(x.jsx)("input",{type:"file",name:"photo",accept:"image/png, image/jpg"}),Object(x.jsx)(k.a,{type:"submit",children:"Upload Photo"})]})]}))}var G=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={addFormShow:!1,profileFormShow:!1,showUploadPhotoForm:!1},e.onHide=function(){e.setState({addFormShow:!1})},e.handleProfileChange=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,location:t.target.location.value,_id:e.props.user._id};y.a.post("".concat(u.API_URL,"/api/auth/user"),a,{withCredentials:!0}).then((function(t){e.props.history.push("/profile")})).catch((function(e){console.log("Something went wrong",e)}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.addFormShow,n=t.profileFormShow,c=t.showUploadPhotoForm,r=this.props,o=r.userLibrary,s=r.user,i=r.handleDelete,l=r.handleEditBook,d=r.handleProfileChange,j=r.handleAddBook,h=r.handlePhoto;return s?Object(x.jsxs)("div",{className:"body-width",children:[a&&Object(x.jsx)(T,{show:a,onHide:this.onHide,book:{},handleAddorEditBook:j}),c&&Object(x.jsx)(H,{show:c,onHide:function(){return e.setState({showUploadPhotoForm:!1})},handlePhoto:h}),Object(x.jsxs)("h2",{children:["Hello ",s.name,"! ",Object(x.jsx)("br",{}),"Welcome to your profile"]}),Object(x.jsxs)(N.a,{className:"text-center",style:{width:"18rem",margin:"1em auto"},children:[Object(x.jsx)(N.a.Img,{variant:"top",src:s.photo,roundedCircle:!0}),Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:"/assets/003-camera.png",style:{cursor:"pointer"},onClick:function(){return e.setState({showUploadPhotoForm:!0})},alt:"uploadphoto-icon"}),Object(x.jsx)("img",{style:{cursor:"pointer"},src:"/assets/008-edition.png",alt:"editprofile-icon",onClick:function(){return e.setState({profileFormShow:!0})}})]}),Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:"Your details"}),Object(x.jsx)("table",{children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Username:"}),Object(x.jsx)("td",{children:s.username})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Name:"}),Object(x.jsx)("td",{children:s.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Last name:"}),Object(x.jsx)("td",{children:s.lastName})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"City:"}),Object(x.jsx)("td",{children:s.location.city})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Email:"}),Object(x.jsx)("td",{children:s.email})]})]})})]}),Object(x.jsx)(N.a.Footer,{}),n&&Object(x.jsx)(M,{show:n,user:s,handleProfileChange:d,onHide:function(){return e.setState({profileFormShow:!1})}})]}),Object(x.jsx)("div",{children:Object(x.jsx)("img",{src:"/assets/library.png",alt:"libraryicon"})}),!o.length&&Object(x.jsx)("h1",{children:"You have no books yet in your Library"}),Object(x.jsx)("img",{style:{cursor:"pointer"},src:"/assets/026-library-2.png",alt:"addbook-icon",onClick:function(){return e.setState({addFormShow:!0})}}),o.map((function(e){return Object(x.jsx)(F,{handleDelete:function(t){i(e._id,t)},handleEditBook:function(t){l(e._id,t)},user:s,book:e},e._id)}))]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"border",variant:"light"}),Object(x.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(x.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"grow",variant:"light"})]})}}]),a}(n.Component),q=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"container-fluid pb-0 mb-0 justify-content-center ",children:Object(x.jsxs)("footer",{children:[Object(x.jsx)("div",{className:"row justify-content-center py-5",children:Object(x.jsxs)("div",{className:"col-xl-8 col-sm-4 mb-2 my-auto mx-auto a",children:[Object(x.jsx)("h3",{className:"mb-md-0 mb-5 bold-text",children:"BookSwitch"}),Object(x.jsxs)("small",{className:"rights",children:[Object(x.jsx)("span",{children:"\xae"})," All Rights Reserved."]}),Object(x.jsx)("br",{}),Object(x.jsx)("h6",{className:"mb-2 bold-text py-2",children:Object(x.jsx)("b",{children:"Contact Us"})}),Object(x.jsx)("p",{className:"mb-1",children:"contact@bookswitch.com"})]})}),Object(x.jsxs)("div",{className:"row justify-content-center",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("img",{className:"my-3 ",width:"90px",src:"/assets/800px-MERN-logo.png",alt:"mernlogo"}),Object(x.jsx)("span",{className:"bold-text py-1",children:"IRONHACKERS"})]}),Object(x.jsxs)("div",{className:"col-md-4 py-1 ",children:[Object(x.jsx)("h6",{className:"mb-2 bold-text",children:Object(x.jsx)("b",{children:"Georgina Morales"})}),Object(x.jsx)("small",{children:" georgina@bookswitch.com"})]}),Object(x.jsxs)("div",{className:"col-md-4 py-1 ",children:[Object(x.jsx)("h6",{className:"mb-2 bold-text",children:Object(x.jsx)("b",{children:"Erdem Taskin"})}),Object(x.jsx)("small",{children:"erdem@bookswitch.com"})]})]})]})})})}}]),a}(n.Component);var z=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),i=s[0],l=s[1];return Object(x.jsx)("div",{children:Object(x.jsxs)(w.a,{className:"body-width",onSubmit:e.handleSubmit,children:[Object(x.jsxs)(w.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(w.a.Label,{children:"Email address"}),Object(x.jsx)(w.a.Control,{required:!0,name:"email",type:"email",placeholder:"Enter email",onChange:function(e){return r(e.target.value)},value:c})]}),Object(x.jsxs)(w.a.Group,{controlId:"formBasicPassword",children:[Object(x.jsx)(w.a.Label,{children:"Password"}),Object(x.jsx)(w.a.Control,{required:!0,name:"password",type:"password",placeholder:"Password",onChange:function(e){return l(e.target.value)},value:i})]}),Object(x.jsx)(k.a,{variant:"primary",size:"lg",block:!0,type:"submit",children:"Submit"})]})})},W=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={messages:null,loggedInUser:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||y.a.get("".concat(u.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){})),y.a.get("".concat(u.API_URL,"/api/message"),{withCredentials:!0}).then((function(t){e.setState({messages:t.data})})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.loggedInUser;if(!t||!a)return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C.a,{animation:"border",variant:"primary"}),Object(x.jsx)(C.a,{animation:"border",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"border",variant:"success"}),Object(x.jsx)(C.a,{animation:"grow",variant:"primary"}),Object(x.jsx)(C.a,{animation:"grow",variant:"secondary"}),Object(x.jsx)(C.a,{animation:"grow",variant:"success"})]});var n=[],c=[];return t.filter((function(e){return e.bookRelated})).forEach((function(e){var t=e.between[0]._id===a._id?e.between[1]:e.between[0];if(!n.includes(t._id)){var r={contact:t,bookRelated:e.bookRelated,date:e.date.toString().substring(4,9)+e.date.toString().substring(14,21),text:e.text};n.push(t._id),c.push(r)}})),Object(x.jsxs)("div",{children:[c.length?Object(x.jsx)("h1",{children:"Your Messages"}):Object(x.jsx)("h1",{children:"You have no Messages yet"}),Object(x.jsx)("div",{className:"list-group",children:c.map((function(e){var t="/messages/"+e.contact._id;return Object(x.jsx)(O.b,{to:t,class:"list-group-item-action",children:Object(x.jsx)("div",{className:"card mb-3 body-width",children:Object(x.jsxs)("div",{className:"row g-0 hor-ver-2",children:[Object(x.jsx)("div",{className:"col-md-4",children:Object(x.jsx)("img",{className:"small-image",src:e.bookRelated.photo,alt:"bookImage"})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("h5",{className:"card-title",children:["Messages with ",Object(x.jsx)("span",{children:e.contact.username})]}),Object(x.jsxs)("h5",{className:"card-title",children:["Book to Switch ",Object(x.jsx)("span",{children:e.bookRelated.title})]}),Object(x.jsxs)("h5",{className:"card-title",children:["Book to Switch ",Object(x.jsx)("span",{children:e.bookRelated.author})]}),Object(x.jsx)("p",{className:"card-text",children:e.text}),Object(x.jsx)("p",{className:"text-muted",children:e.date})]})})]})})},e.contact._id)}))})]})}}]),a}(n.Component),K=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={messages:[],book:"",contact:"",loggedInUser:"",input:""},e.handleSubmit=function(t){t.preventDefault();var a=t.target.text.value;t.target.reset();var n={text:a,between:[e.state.loggedInUser._id,e.state.contact._id],bookRelated:e.state.book};y.a.post("".concat(u.API_URL,"/api/message"),n,{withCredentials:!0}).then((function(t){e.setState({messages:[].concat(Object(i.a)(e.state.messages),[t.data])},(function(){e.props.history.push("/messages/".concat(e.state.contact._id))}))})).catch((function(e){console.log(e)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||y.a.get("".concat(u.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data})})).catch((function(){}));var t=this.props.match.params.contactId;y.a.get("".concat(u.API_URL,"/api/message/").concat(t),{withCredentials:!0}).then((function(a){var n=a.data[0].between[0]._id===t?a.data[0].between[0]:a.data[0].between[1];e.setState({messages:a.data,book:a.data[0].bookRelated,contact:n},(function(){return console.log(e.state.book,e.state.contact)}))})).catch((function(){console.log("Fetching failed")}))}},{key:"render",value:function(){var e=this.state,t=e.messages,a=e.book,n=e.contact,c=(e.input,"/book/"+a._id);return Object(x.jsxs)("div",{className:"div-message",children:[Object(x.jsx)(O.b,{className:"book-link",to:c,children:Object(x.jsx)("div",{className:"messages-div list-group",children:Object(x.jsx)("div",{className:"card mb-3",style:{maxWidth:"800px"},children:Object(x.jsxs)("div",{className:"row g-0",children:[Object(x.jsx)("div",{className:"col-md-4",children:Object(x.jsx)("img",{className:"small-image",src:this.state.book.photo,alt:"book-cover"})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h4",{className:"card-title",children:this.state.book.title}),Object(x.jsxs)("h5",{className:"card-title",children:["by ",this.state.book.author," "]}),Object(x.jsxs)("h5",{className:"card-title",children:["to ",this.state.book.switchMode]}),Object(x.jsx)("p",{className:"card-text",children:this.state.book.description})]})})]})})})}),Object(x.jsxs)("h2",{children:["Messages with ",n.username]}),t.map((function(e){var t=e.date,a=e.between[1]._id===n._id?"div-right":"div-left";return Object(x.jsxs)("div",{className:a,children:[e.text,Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"small text-muted",children:t})]})})),Object(x.jsxs)("form",{className:"message-form",onSubmit:this.handleSubmit,children:[Object(x.jsx)("input",{name:"text",required:"true",type:"text",className:"form-control"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-del",children:"Send"})]})]})}}]),a}(n.Component),Y=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.error?this.props.error.massage:"Uh oh, we can\u2019t seem to find the page you\u2019re looking for. Try going back to the previous page";return Object(x.jsxs)(N.a,{className:"bg-dark text-white body-width",children:[Object(x.jsx)(N.a.Img,{src:"/assets/404page.jpg",alt:"Card image"}),Object(x.jsxs)(N.a.ImgOverlay,{children:[Object(x.jsx)(N.a.Title,{children:Object(x.jsx)("h1",{children:"Error Found"})}),Object(x.jsx)(N.a.Text,{children:e}),Object(x.jsx)(N.a.Text,{children:"Our apologies for the inconvenience."})]})]})}}]),a}(n.Component),J=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loggedInUser:"",nouser:!0,userLibrary:[],error:null},e.handlePhoto=function(t){t.preventDefault();var a=t.target.photo.files[0],n=new FormData;n.append("imageUrl",a),y.a.post("".concat(u.API_URL,"/api/cloudinary/upload"),n).then((function(t){var a=t.data.photo,n={_id:e.state.loggedInUser._id,username:e.state.loggedInUser.username,name:e.state.loggedInUser.name,lastName:e.state.loggedInUser.lastName,location:e.state.loggedInUser.location._id,photo:a};y.a.post("".concat(u.API_URL,"/api/auth/user"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/profile")}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e.handleSignUp=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,email:t.target.email.value,password:t.target.password.value,location:t.target.location.value};y.a.post("".concat(u.API_URL,"/api/auth/signup"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e.handleLogIn=function(t){t.preventDefault();var a={email:t.target.email.value,password:t.target.password.value};y.a.post("".concat(u.API_URL,"/api/auth/login"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e.handleLogout=function(){y.a.post("".concat(u.API_URL,"/api/auth/logout"),{},{withCredentials:!0}).then((function(){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))}))},e.handleEditBook=function(t,a){a.preventDefault();var n=a.target.title.value,c=a.target.author.value,r=a.target.description.value,o=(a.target.photo.value,{title:n,author:c,description:r,language:a.target.language.value,category:a.target.category.value,switchMode:a.target.switchMode.value});y.a.post("".concat(u.API_URL,"/api/book/edit/").concat(t),o,{withCredentials:!0}).then((function(a){var n=a.data,c=e.state.userLibrary.map((function(e){return e._id===n._id?(n.owner=e.owner,n):e}));e.setState({userLibrary:c},(function(){e.props.history.push("/book/".concat(t))}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e.handleAddBook=function(t){t.preventDefault();var a=t.target.photo.value,n={title:t.target.title.value,author:t.target.author.value,description:t.target.description.value,language:t.target.language.value,category:t.target.category.value,photo:a,switchMode:t.target.switchMode.value};y.a.post("".concat(u.API_URL,"/api/book/add"),n,{withCredentials:!0}).then((function(t){var a=t.data;e.setState({userLibrary:[a].concat(Object(i.a)(e.state.userLibrary))})})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e.handleDelete=function(t){y.a.delete("".concat(u.API_URL,"/api/book/delete/").concat(t),{withCredentials:!0}).then((function(){var a=e.state.userLibrary.filter((function(e){return e._id!==t}));e.setState({userLibrary:a},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Delete failed",e)}))},e.handleProfileChange=function(t){t.preventDefault();var a={username:t.target.username.value,name:t.target.name.value,lastName:t.target.lastName.value,location:t.target.location.value,_id:e.state.loggedInUser._id,photo:e.state.loggedInUser.photo};y.a.post("".concat(u.API_URL,"/api/auth/user"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/profile")}))})).catch((function(t){e.setState({error:t},(function(){return e.props.history.push("/err")}))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.get("".concat(u.API_URL,"/api/auth/user"),{withCredentials:!0}).then((function(t){e.setState({nouser:!1,loggedInUser:t.data},(function(){y.a.get("".concat(u.API_URL,"/api/book/user/").concat(e.state.loggedInUser._id)).then((function(t){e.setState({userLibrary:t.data})}))}))})).catch((function(t){e.setState({nouser:!0})}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(g,{handleLogout:this.handleLogout,handleLogIn:this.handleLogIn,handleSignUp:this.handleSignUp,user:this.state.loggedInUser}),!this.state.loggedInUser&&Object(x.jsx)(P,{handleFirstEdit:this.handleFirstEdit}),Object(x.jsxs)(b.c,{children:[Object(x.jsx)(b.a,{path:"/signup",render:function(t){return Object(x.jsx)(S,Object(s.a)({handleSubmit:e.handleSignUp},t))}}),Object(x.jsx)(b.a,{path:"/login",render:function(t){return Object(x.jsx)(z,Object(s.a)({handleSubmit:e.handleLogIn},t))}}),Object(x.jsx)(b.a,{exact:!0,path:"/",render:function(e){return Object(x.jsx)(_,Object(s.a)({},e))}}),Object(x.jsx)(b.a,{path:"/book/:bookId",render:function(t){return Object(x.jsx)(D,Object(s.a)({user:e.state.loggedInUser,handleAddBook:e.handleAddBook,handleDelete:e.handleDelete,handleEditBook:e.handleEditBook},t))}}),Object(x.jsx)(b.a,{exact:!0,path:"/messages",render:function(e){return Object(x.jsx)(W,Object(s.a)({},e))}}),Object(x.jsx)(b.a,{path:"/messages/:contactId",render:function(e){return Object(x.jsx)(K,Object(s.a)({},e))}}),Object(x.jsx)(b.a,{exact:!0,path:"/profile",render:function(t){return Object(x.jsx)(G,Object(s.a)({userLibrary:e.state.userLibrary,user:e.state.loggedInUser,handleAddBook:e.handleAddBook,handleDelete:e.handleDelete,handleEditBook:e.handleEditBook,handleProfileChange:e.handleProfileChange,handlePhoto:e.handlePhoto},t))}}),Object(x.jsx)(b.a,{path:"/error",render:function(t){return Object(x.jsx)(Y,Object(s.a)({error:e.state.error},t))}}),Object(x.jsx)(b.a,{component:Y})]}),Object(x.jsx)(q,{})]})}}]),a}(n.Component),V=Object(b.f)(J);o.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(O.a,{children:Object(x.jsx)(V,{})})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.c088d1b2.chunk.js.map